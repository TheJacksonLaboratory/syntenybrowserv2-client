<div class="content-container">
  <div class="content-area">
    <div class="clr-row">
      <div class="clr-col-12">
        <h2 class="top-0">Running the Application with Docker</h2>
        <h4 class="">Prerequisites</h4>
        <p>
          - A bash terminal (Mac OS X &amp; Linux will have this included)
          or a way of running shell scripts
          <br />
          - Docker installed on your machine so that you can
          build images and run containers
          <br />
          - An account at the Docker Hub registry so that you can pull Docker images.
          It is free to create an account so if you don't already have one, check out this
          <a href="https://hub.docker.com" target="_blank">link</a> to create one.
          <br />
          - To run the Microservice API you'll need a database and you have two
          <a [routerLink]="['/docs/database']">options</a>:
          (1) either download a preloaded database or (2) load a database yourself.
        </p>
        <br />
        <p>For questions and feedback please <a [routerLink]="['/about']">contact</a> the support team.</p>
      </div>
    </div>

    <div class="clr-row">
      <div class="clr-col-md-12 clr-col-lg-6">
        <h4>
          <clr-icon shape="container" size="18"></clr-icon>
          UI (Front-End) Setup
        </h4>
        <br />
        <p>1. Clone the client (front-end) code from
          <a href="https://github.com/TheJacksonLaboratory/syntenybrowserv2-client" target="_blank">GitHub</a>
          and navigate to the project's root.
        </p>
        <pre><code>> git clone https://github.com/TheJacksonLaboratory/syntenybrowserv2-client.git</code></pre>
        <br />
        <p>
          2. Run the below command to build an image <em><b>synteny-ui</b></em>
          (this can take up to 5 mins).
        </p>
        <pre><code>> docker build . --tag=synteny-ui</code></pre>
        <p>
          <b>Note</b>: a successful build will end with lines like these:
        </p>
        <pre class="padding-0">
          <code class="font-08em">
      => [stage-1 3/3] COPY ./deploy/nginx-sb.conf /etc/nginx/conf.d/default.conf                 0.0s&nbsp;
      => exporting to image                                                                       0.2s&nbsp;
      => => exporting layers                                                                      0.2s&nbsp;
      => => writing image sha256:5fae3aee7353734afa82a5c57d7bace792be44e7d571a42f35d1860fdf721187 0.0s&nbsp;
      => => naming to docker.io/library/synteny-ui                                                0.0s&nbsp;
          </code>
        </pre>
        <br />
        <p>
          3. Start a container based on the created Docker image -
          <em><b>synteny-ui</b></em>
        </p>
        <pre><code>> docker run -p 4200:80 -d --rm synteny-ui</code></pre>
        <br />
        <p>
          4. Use a browser to open the application UI at:
        </p>
        <pre><code>http://localhost:4200</code></pre>
        <br />
        <p>
          5. At this point the local UI will be connected to
          the JAX Synteny Browser's public API.
          <br />
          To connect it to a local API instance, first run the API
          microservice locally (as described in its section) and then in <em>/src/environments/environment.ts</em>
          set this line.
        </p>
        <pre><code>api: 'http://localhost:8000/api/'</code></pre>
        <p>
          Then do steps 2, 3 and 4 from above to build an image and run a container.
        </p>
      </div>
      <div class="clr-col-md-12 clr-col-lg-6">
        <h4>
          <clr-icon shape="file-group" size="18"></clr-icon>
          Microservice (Back-End) API
        </h4>
        <br />
        <p>1. Clone the API (back-end) code from
          <a href="https://github.com/TheJacksonLaboratory/syntenybrowserv2-api" target="_blank">GitHub</a>
          and navigate to the cloned project root.
        </p>
        <pre><code>> git clone https://github.com/TheJacksonLaboratory/syntenybrowserv2-api.git</code></pre>
        <br />
        <p>
          2. Run the below command to build an image called <em><b>synteny-api</b></em>.
        </p>
        <pre><code>> docker build . --tag=synteny-api</code></pre>
        <p>
          <b>Note</b>: a successful build will end with lines like these:
        </p>
        <pre class="padding-0">
          <code class="font-08em">
      => [5/5] RUN pip install --upgrade pip && pip install -r requirements.txt                   28.1s&nbsp;
      => exporting to image                                                                        2.0s&nbsp;
      => => exporting layers                                                                       2.0s&nbsp;
      => => writing image sha256:9ecdfab9783ba9a01d6a32129168c430141f1737425fa43c07925e0d167f7174  0.0s&nbsp;
      => => naming to docker.io/library/synteny-api                                                0.0s&nbsp;
          </code>
        </pre>
        <br />
        <p>
          3. Start a container based on the created Docker image -
          <em><b>synteny-api</b></em>
        </p>
        <pre><code>> docker run -p 8000:8000 -d --rm synteny-api</code></pre>
        <br />
        <p>
          4. Use a browser to open the application API at:
        </p>
        <pre><code>http://localhost:8000/api</code></pre>
        <br />
        <p>
          5. <b>Note</b>: for the microservice to work, a database file called <b>synteny.db</b>
          needs to exist within the project's root.
        </p>
      </div>
    </div>
  </div>
</div>
